<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>é “æœãƒ­ã‚°ï¼ˆäº‹å®Ÿè¨˜éŒ²ï¼‰</title>
    <style>
      :root { --border:#e6e6e6; --muted:#666; --card:#f7f7f7; --danger:#b00020; }
      body { font-family: system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif; margin:0; }
      .wrap { max-width:760px; margin:0 auto; padding:18px 16px 32px; }
      header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0 10px;}
      h1{font-size:18px;margin:0;}
      .tag{padding:2px 10px;border:1px solid var(--border);border-radius:999px;font-size:12px;color:var(--muted);background:#fff;}
      .note{background:var(--card);border:1px solid var(--border);padding:12px 14px;border-radius:12px;margin:10px 0 14px;line-height:1.6;}
      .card{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff;margin:10px 0;}
      label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px;}
      select,input,textarea{width:100%;border:1px solid var(--border);border-radius:12px;padding:12px;font-size:16px;box-sizing:border-box;}
      textarea{min-height:84px;resize:vertical;}
      .actions{display:grid;gap:10px;margin-top:12px;}
      button{width:100%;padding:14px;border-radius:14px;border:1px solid var(--border);background:#fff;font-size:16px;font-weight:700;text-align:left;}
      button.primary{background:#111;color:#fff;border-color:#111;}
      button.danger{background:#fff7f7;border-color:#ffd7d7;color:var(--danger);}
      pre{white-space:pre-wrap;word-break:break-word;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;font-size:13px;line-height:1.6;}
      .links{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;}
      .links a{font-size:12px;color:inherit;text-decoration:underline;}
      .hint{font-size:12px;color:var(--muted);margin-top:8px;line-height:1.6;}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <h1>é “æœãƒ­ã‚°ï¼ˆäº‹å®Ÿè¨˜éŒ²ï¼‰</h1>
        <span class="tag">WIP</span>
      </header>

      <div class="note">
        <strong>é‡è¦ï¼š</strong>ã“ã®ç”»é¢ã¯<strong>åˆ¤æ–­ãƒ»è©•ä¾¡ãƒ»è¨ºæ–­ã‚’ã—ã¾ã›ã‚“</strong>ã€‚<br />
        ã“ã“ã§è¡Œã†ã®ã¯<strong>ã€Œå®Ÿæ–½ã—ãŸäº‹å®Ÿã®è¨˜éŒ²ã€</strong>ã¨ã€é›»å­è¨˜éŒ²ã¸è²¼ã‚Šä»˜ã‘ã‚‹ãŸã‚ã®<strong>å®šå‹ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ</strong>ã ã‘ã§ã™ã€‚<br />
        <span style="color:var(--muted);font-size:12px;">â€» è¿·ã†ï¼å±é™ºã‚’æ„Ÿã˜ã‚‹å ´åˆã¯ã€Œãƒ¬ãƒƒãƒ‰ãƒ•ãƒ©ãƒƒã‚°ï¼ˆ6å•ï¼‰ã€ã¸ã€‚</span>
      </div>

      <div class="card">
        <label for="event">ä½•ã‚’ã—ãŸã‹ï¼ˆäº‹å®Ÿï¼‰</label>
        <select id="event">
          <option value="given">é “æœã‚’æ¸¡ã—ãŸï¼ˆä½¿ç”¨ï¼‰</option>
          <option value="refused">æœ¬äººãŒæ‹’å¦ã—ãŸï¼ˆæœªä½¿ç”¨ï¼‰</option>
          <option value="no_stock">åœ¨åº«ãŒãªã„ï¼ˆæœªä½¿ç”¨ï¼‰</option>
          <option value="other">ãã®ä»–ï¼ˆãƒ¡ãƒ¢ã«è¨˜è¼‰ï¼‰</option>
        </select>

        <div style="height:10px;"></div>

        <label for="drug">é “æœï¼ˆä»»æ„ï¼‰</label>
        <select id="drug">
          <option value="">ï¼ˆæœªé¸æŠã§ã‚‚å¯ï¼‰</option>
          <option>ã‚«ãƒ­ãƒŠãƒ¼ãƒ«</option>
          <option>ãƒ­ã‚­ã‚½ãƒ‹ãƒ³</option>
          <option>ä¸‹å‰¤</option>
          <option>ä¸çœ æ™‚è–¬</option>
          <option>ãã®ä»–</option>
        </select>

        <div style="height:10px;"></div>

        <label for="dose">é‡ï¼ˆä»»æ„ï¼‰</label>
        <input id="dose" placeholder="ä¾‹ï¼š1éŒ  / 10mL / 1åŒ…" />

        <div style="height:10px;"></div>

        <label for="reason">æœ¬äººã®è¨´ãˆï¼ˆä»»æ„ï¼‰</label>
        <select id="reason">
          <option value="">ï¼ˆæœªé¸æŠã§ã‚‚å¯ï¼‰</option>
          <option>é ­ç—›ï¼ˆæœ¬äººç”³å‘Šï¼‰</option>
          <option>ç—›ã¿ï¼ˆæœ¬äººç”³å‘Šï¼‰</option>
          <option>çœ ã‚Œãªã„ï¼ˆæœ¬äººç”³å‘Šï¼‰</option>
          <option>ãã®ä»–ï¼ˆãƒ¡ãƒ¢ã«è¨˜è¼‰ï¼‰</option>
        </select>

        <div class="hint">â€»ã€Œé‡ç—‡åº¦ã€ã‚„ã€Œæ­£ã—ã•ã€ã¯è¨˜éŒ²ã—ãªã„ã€‚</div>

        <div style="height:10px;"></div>

        <label for="memo">ãƒ¡ãƒ¢ï¼ˆä»»æ„ãƒ»çŸ­ãï¼‰</label>
        <textarea id="memo" placeholder="ä¾‹ï¼šè½ã¡ç€ã‹ãªã„è¨´ãˆï¼æœè–¬å¾Œã¯å®‰é™ã€‚è©•ä¾¡ãƒ»åˆ¤æ–­ã¯æ›¸ã‹ãªã„ã€‚"></textarea>

        <div class="actions">
          <button class="primary" id="btnBuild">ğŸ“‹ è²¼ã‚Šä»˜ã‘ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆ</button>
          <button id="btnCopy">âœ… ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</button>
          <button class="danger" id="btnToRF">ğŸš¨ ãƒ¬ãƒƒãƒ‰ãƒ•ãƒ©ãƒƒã‚°ï¼ˆ6å•ï¼‰ã‚’é–‹ã</button>
        </div>

        <div class="hint">
          ãƒ»ã€Œä½¿ç”¨ã—ãŸã€ã“ã¨ã¯<strong>äº‹å®Ÿ</strong>ã¨ã—ã¦æ®‹ã™ã€‚<br />
          ãƒ»ã€ŒåŠ¹ã„ãŸï¼åŠ¹ã‹ãªã„ã€ã¯<strong>è©•ä¾¡</strong>ãªã®ã§ã“ã“ã§ã¯æ›¸ã‹ãªã„ã€‚
        </div>
      </div>

      <div class="card">
        <label>ç”Ÿæˆçµæœï¼ˆé›»å­è¨˜éŒ²ã¸è²¼ã‚Šä»˜ã‘ï¼‰</label>
        <pre id="out">ï¼ˆã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ï¼‰</pre>
      </div>

      <div class="links">
        <a href="./hub.html">HUBã¸æˆ»ã‚‹</a>
  <a href="./risk.html">ãƒ¬ãƒƒãƒ‰ãƒ•ãƒ©ãƒƒã‚°ï¼ˆ6å•ï¼‰</a>
      </div>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);

      function nowText() {
        const d = new Date();
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2, '0');
        const da = String(d.getDate()).padStart(2, '0');
        const hh = String(d.getHours()).padStart(2, '0');
        const mm = String(d.getMinutes()).padStart(2, '0');
        return `${y}/${m}/${da} ${hh}:${mm}`;
      }

      function buildText() {
        const t = nowText();
        const event = $('event').value;
        const drug = $('drug').value || 'ï¼ˆæœªé¸æŠï¼‰';
        const dose = ($('dose').value || '').trim() || 'ï¼ˆæœªè¨˜è¼‰ï¼‰';
        const reason = $('reason').value || 'ï¼ˆæœªè¨˜è¼‰ï¼‰';
        const memo = ($('memo').value || '').trim() || 'ï¼ˆãªã—ï¼‰';

        const eventLabel = {
          given: 'é “æœã‚’æ¸¡ã—ãŸï¼ˆä½¿ç”¨ï¼‰',
          refused: 'æœ¬äººãŒæ‹’å¦ã—ãŸï¼ˆæœªä½¿ç”¨ï¼‰',
          no_stock: 'åœ¨åº«ãŒãªã„ï¼ˆæœªä½¿ç”¨ï¼‰',
          other: 'ãã®ä»–',
        }[event] || 'ï¼ˆä¸æ˜ï¼‰';

        return [
          `ã€é “æœãƒ­ã‚°ï½œ${t}ã€‘`,
          `äº‹å®Ÿï¼š${eventLabel}`,
          `é “æœï¼š${drug} ï¼ é‡ï¼š${dose}`,
          `è¨´ãˆï¼š${reason}`,
          `ãƒ¡ãƒ¢ï¼š${memo}`,
          `â€»åˆ¤æ–­ãƒ»è©•ä¾¡ã¯è¡Œã£ã¦ã„ãªã„ï¼ˆäº‹å®Ÿè¨˜éŒ²ï¼‰`,
        ].join('\\n');
      }

      $('btnBuild').addEventListener('click', () => {
        $('out').textContent = buildText();
      });

      $('btnCopy').addEventListener('click', async () => {
        const text = $('out').textContent;
        try {
          await navigator.clipboard.writeText(text);
          $('btnCopy').textContent = 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ';
          setTimeout(() => ($('btnCopy').textContent = 'âœ… ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼'), 1200);
        } catch {
          alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§é¸æŠã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
        }
      });

      $('btnToRF').addEventListener('click', () => {
  location.href = './risk.html';
      });

      $('out').textContent = buildText();
    </script>
  </body>
</html>